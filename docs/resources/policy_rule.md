---
page_title: "clumio_policy_rule Resource - terraform-provider-clumio"
subcategory: ""
description: |-
  Clumio Policy Rule Resource used to determine how a policy should be assigned to assets.
---

# clumio_policy_rule (Resource)

Clumio Policy Rule Resource used to determine how a policy should be assigned to assets.

## Example Usage

### Policy Rule example with policy_id referred from policy resource

```terraform
resource "clumio_policy" "example_ebs" {
  name              = "example-policy-EBS"
  activation_status = "activated"
  operations {
    action_setting = "immediate"
    type           = "aws_ebs_volume_backup"
    slas {
      retention_duration {
        unit  = "days"
        value = 30
      }
      rpo_frequency {
        unit  = "days"
        value = 1
      }
    }
    advanced_settings {
      aws_ebs_volume_backup {
        backup_tier = "standard"
      }
    }
  }
}

resource "clumio_policy_rule" "example_1" {
  name = "example-policy-rule-1"
  # Using the clumio_policy resource to get the id of the policy.
  policy_id      = clumio_policy.example_ebs.id
  before_rule_id = clumio_policy_rule.example_2.id
  condition      = "{\"entity_type\":{\"$eq\":\"aws_ebs_volume\"}, \"aws_account_native_id\":{\"$in\":[\"aws_account_id_1\", \"aws_account_id_2\"]}, \"aws_tag\":{\"$eq\":{\"key\":\"aws_tag_key\", \"value\":\"aws_tag_value\"}}}"
}
```

### Policy Rule example with policy_id referred from policy data source

```terraform
data "clumio_policy" "test_policy" {
  name = "test-policy"
}

resource "clumio_policy_rule" "example_2" {
  name = "example-policy-rule-2"
  # Using the clumio_policy data source to get the id of the policy. For more information on the
  # clumio_policy data source, please refer to the data source documentation.
  policy_id      = tolist(data.clumio_policy.test_policy.policies)[0].id
  before_rule_id = ""
  condition      = "{\"entity_type\":{\"$eq\":\"aws_ec2_instance\"}, \"aws_account_native_id\":{\"$eq\":\"aws_account_id_1\"}, \"aws_region\":{\"$eq\":\"us-west-2\"}, \"aws_tag\":{\"$contains\":{\"key\":\"aws_tag_key_substr\", \"value\":\"aws_tag_value_substr\"}}}"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `before_rule_id` (String) The policy rule ID before which this policy rule should be inserted. An empty value will set the rule to have lowest priority. NOTE: If in the Global Organizational Unit, rules can also be prioritized against two virtual rules maintained by the system: `asset-level-rule` and `child-ou-rule`. `asset-level-rule` corresponds to the priority of Direct Assignments (when a policy is applied directly to an asset) whereas `child-ou-rule` corresponds to the priority of rules created by child organizational units.
- `condition` (String) The condition of the policy rule. Possible conditions include:
	1) `entity_type` is required and supports `$eq` and `$in` filters. `entity_type` must be one of `aws_rds_instance`, `aws_ebs_volume`, `aws_ec2_instance`, `aws_dynamodb_table` or `aws_rds_cluster`.
	2) `aws_account_native_id` and `aws_region` are optional and both support `$eq` and `$in` filters.
	3) `aws_tag` is optional and supports `$eq`, `$in`, `$all`, and `$contains` filters.
- `name` (String) The name of the policy rule.
- `policy_id` (String) The Clumio-assigned ID of the policy.

### Optional

- `organizational_unit_id` (String, Deprecated) The Clumio-assigned ID of the organizational unit to use as the context for assigning the policy.

### Read-Only

- `id` (String) Unique identifier of the policy rule.

## Import

Import is supported using the following syntax:

```shell
# Replace POLICY_RULE_ID with the correct Clumio Policy Rule ID.
terraform import clumio_policy_rule.example POLICY_RULE_ID
```
