---
page_title: "clumio_protection_group Resource - terraform-provider-clumio"
subcategory: ""
description: |-
  Clumio S3 Protection Group Resource used to create and manage Protection Groups.
---

# clumio_protection_group (Resource)

Clumio S3 Protection Group Resource used to create and manage Protection Groups.

## Example Usage

### Basic Example

```terraform
resource "clumio_protection_group" "basic_example" {
  name        = "example-protection_group-1"
  description = "example protection group-1"
  bucket_rule = "{\"aws_tag\":{\"$eq\":{\"key\":\"Environment\", \"value\":\"Prod\"}}}"
  object_filter {
    storage_classes = [
      "S3 Standard"
    ]
  }
}
```

### Advanced Example

```terraform
resource "clumio_protection_group" "advanced_example" {
  name        = "example-protection_group-2"
  description = "example protection group-2"
  bucket_rule = jsonencode(
    {
      "aws_tag" : {
        "$eq" : {
          "key" : "Environment",
          "value" : "Prod"
        }
      },
      "account_native_id" : {
        "$eq" : "AWS Account ID"
      },
      "aws_region" : {
        "$eq" : "AWS Region"
      }
    }
  )
  object_filter {
    latest_version_only = false
    prefix_filters {
      excluded_sub_prefixes = ["prefix1", "prefix2"]
      prefix                = "prefix"
    }
    storage_classes = [
      "S3 Standard", "S3 Standard-IA", "S3 Intelligent-Tiering", "S3 One Zone-IA",
      "S3 Reduced Redundancy"
    ]
  }
}
```

### Prefix Filter Examples

```terraform
resource "clumio_protection_group" "prefix_filter_1" {
  name        = "example-protection_group-3"
  description = "example protection group-3"
  object_filter {
    latest_version_only = false
    prefix_filters {
      excluded_sub_prefixes = ["abc", "xyz"] # exludes /abc, /xyz only /123, /foo are backed up
      prefix                = "/"            # /abc, /xyz, /123, /foo
    }
    storage_classes = ["S3 Standard"]
  }
}
```

```terraform
resource "clumio_protection_group" "prefix_filter_2" {
  name        = "example-protection_group-4"
  description = "example protection group-4"
  object_filter {
    latest_version_only = false
    prefix_filters {
      excluded_sub_prefixes = ["abcd", "/xyz"] # exludes all objects that start with path abcd or /xyz
      prefix                = ""               # include all objects in the bucket
    }
    storage_classes = ["S3 Standard"]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The user-assigned name of the protection group. Must be globally-unique.

### Optional

- `bucket_rule` (String) The following table describes the possible conditions for a bucket to be automatically added to a protection group. <br><table><tr><th>Field</th><th>Rule Condition</th><th>Description</th></tr><tr><td>aws_tag</td><td>$eq, $not_eq, $contains, $not_contains, $all, $not_all, $in, $not_in</td><td>Denotes the AWS tag(s) to conditionalize on<code>{"aws_tag":{"$eq":{"key":"Environment", "value":"Prod"}}}</code></td></tr><tr><td>aws_account_native_id</td><td>$eq, $in</td><td>Denotes the AWS account to conditionalize on<code>{"aws_account_native_id":{"$eq":"111111111111"}}</code></td></tr><tr><td>account_native_id<br><b>Deprecated</b></td><td>$eq, $in</td><td>This will be deprecated and use aws_account_native_id instead.<br>Denotes the AWS account to conditionalize on<code>{"account_native_id":{"$in":["111111111111"]}}</code></td></tr><tr><td>aws_region</td><td>$eq, $in</td><td>Denotes the AWS region to conditionalize on<code>{"aws_region":{"$eq":"us-west-2"}}</code></td></tr></table>
- `description` (String) Brief description to denote details of the protection group.
- `object_filter` (Block Set) (see [below for nested schema](#nestedblock--object_filter))

### Read-Only

- `id` (String) Unique identifier for the Clumio Protection Group.
- `protection_info` (Attributes List) The protection policy applied to this resource. (see [below for nested schema](#nestedatt--protection_info))
- `protection_status` (String) The protection status of the protection group. Possible values include"protected", "unprotected", and "unsupported". If the protection group does notsupport backups, then this field has a value of unsupported.

<a id="nestedblock--object_filter"></a>
### Nested Schema for `object_filter`

Required:

- `storage_classes` (Set of String) Storage class to include in the backup. Valid values are: S3 Standard, S3 Standard-IA, S3 Intelligent-Tiering, and S3 One Zone-IA.

Optional:

- `earliest_last_modified_timestamp` (String) The cutoff date for inclusion objects from the backup. Any object with a last modified date after or equal than this value will be included in the backup. This is useful for filtering out old or irrelevant objects based on their modification timestamps. This supports RFC-3339 format.
- `latest_version_only` (Boolean) Whether to back up only the latest object version.
- `prefix_filters` (Block Set) Prefix Filters. (see [below for nested schema](#nestedblock--object_filter--prefix_filters))

<a id="nestedblock--object_filter--prefix_filters"></a>
### Nested Schema for `object_filter.prefix_filters`

Required:

- `prefix` (String) Prefix to include. To include all objects in the bucket specify empty string "".

Optional:

- `excluded_sub_prefixes` (Set of String) List of subprefixes to exclude from the prefix.



<a id="nestedatt--protection_info"></a>
### Nested Schema for `protection_info`

Read-Only:

- `inheriting_entity_id` (String) The identifier of the entity from which protection was inherited.
- `inheriting_entity_type` (String) The type of the entity from which protection was inherited.
- `policy_id` (String) Identifier of the policy to apply on Protection Group

## Import

Import is supported using the following syntax:

```shell
# Replace PROTECTION_GROUP_ID with the correct Clumio Protection Group ID.
terraform import clumio_protection_group.example PROTECTION_GROUP_ID
```
