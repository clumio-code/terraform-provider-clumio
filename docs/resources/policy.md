---
page_title: "clumio_policy Resource - terraform-provider-clumio"
subcategory: ""
description: |-
  Clumio Policy Resource used to schedule backups on Clumio supported data sources.
---

# clumio_policy (Resource)

Clumio Policy Resource used to schedule backups on Clumio supported data sources.

## Example Usage

### S3 Protection Group Example

```terraform
resource "clumio_policy" "example_s3_protection_group" {
  name              = "example-policy-S3-Protection-Group"
  activation_status = "activated"
  operations {
    action_setting = "immediate"
    type           = "protection_group_backup"
    slas {
      retention_duration {
        unit  = "months"
        value = 3
      }
      rpo_frequency {
        unit  = "days"
        value = 1
      }
    }
    advanced_settings {
      protection_group_backup {
        backup_tier = "cold"
      }
    }
  }
}
```

### EBS Volume Example

```terraform
resource "clumio_policy" "example_ebs" {
  name              = "example-policy-EBS"
  activation_status = "activated"
  operations {
    action_setting = "immediate"
    type           = "aws_ebs_volume_backup"
    slas {
      retention_duration {
        unit  = "days"
        value = 30
      }
      rpo_frequency {
        unit  = "days"
        value = 1
      }
    }
    advanced_settings {
      aws_ebs_volume_backup {
        backup_tier = "standard"
      }
    }
  }
}
```

### EC2 Instance Example

```terraform
resource "clumio_policy" "example_ec2" {
  name              = "example-policy-EC2"
  activation_status = "activated"
  operations {
    action_setting = "immediate"
    type           = "aws_ec2_instance_backup"
    slas {
      retention_duration {
        unit  = "days"
        value = 30
      }
      rpo_frequency {
        unit  = "days"
        value = 1
      }
    }
    advanced_settings {
      aws_ec2_instance_backup {
        backup_tier = "standard"
      }
    }
  }
}
```

### RDS Example

```terraform
resource "clumio_policy" "example_rds" {
  name              = "example-policy-RDS"
  activation_status = "activated"
  operations {
    action_setting = "immediate"
    type           = "aws_rds_resource_granular_backup"
    slas {
      retention_duration {
        unit  = "months"
        value = 12
      }
      rpo_frequency {
        unit  = "months"
        value = 1
      }
    }
    advanced_settings {
      aws_rds_resource_granular_backup {
        backup_tier = "frozen"
      }
    }
  }
}
```

### MSSQL on EC2 Example

```terraform
resource "clumio_policy" "example_mssql-ec2" {
  name              = "example-policy-MSSQL-EC2"
  activation_status = "activated"
  operations {
    action_setting = "immediate"
    type           = "ec2_mssql_database_backup"
    slas {
      retention_duration {
        unit  = "days"
        value = 30
      }
      rpo_frequency {
        unit  = "days"
        value = 1
      }
    }
    advanced_settings {
      ec2_mssql_database_backup {
        alternative_replica = "sync_secondary"
        preferred_replica   = "primary"
      }
    }
  }
  operations {
    action_setting = "immediate"
    type           = "ec2_mssql_log_backup"
    slas {
      retention_duration {
        unit  = "days"
        value = 5
      }
      rpo_frequency {
        unit  = "minutes"
        value = 15
      }
    }
    advanced_settings {
      ec2_mssql_log_backup {
        alternative_replica = "sync_secondary"
        preferred_replica   = "primary"
      }
    }
  }
}
```

### DynamoDB Example

```terraform
resource "clumio_policy" "example_dynamodb" {
  name              = "example-policy-DynamoDB"
  activation_status = "activated"
  operations {
    action_setting = "immediate"
    type           = "aws_dynamodb_table_backup"
    slas {
      retention_duration {
        unit  = "days"
        value = 7
      }
      rpo_frequency {
        unit  = "hours"
        value = 12
      }
    }
  }
}
```

### Fixed Start Time and Timezone Example

```terraform
resource "clumio_policy" "example_backup_windown_timezone" {
  name              = "example-policy-Backup-Window-Timezone"
  activation_status = "activated"
  operations {
    action_setting = "immediate"
    type           = "aws_ebs_volume_backup"
    slas {
      retention_duration {
        unit  = "days"
        value = 30
      }
      rpo_frequency {
        unit  = "days"
        value = 1
      }
    }
    backup_window_tz {
      start_time = "05:00"
    }
    timezone = "America/Los_Angeles"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The user-assigned name of the policy. Note that having identical names for different policies is permissible.

### Optional

- `activation_status` (String) The status of the policy. Valid values are: `activated` and `deactivated`. `activated` backups will take place regularly according to the policy SLA. `deactivated` backups will not begin until the policy is reactivated. The assets associated with the policy will have their compliance status set to deactivated.
- `operations` (Block Set) Each data source to be protected should have details provided in the list of operations. These details include information such as how often to protect the data source, whether a backup window is desired, which type of protection to perform, etc. (see [below for nested schema](#nestedblock--operations))
- `timezone` (String, Deprecated) The time zone for the policy, in IANA format. For example: `America/Los_Angeles`, `America/New_York`, `Etc/UTC`, etc. For more information, see the Time Zone Database (https://www.iana.org/time-zones) on the IANA website.

### Read-Only

- `id` (String) Unique identifier of the policy.
- `lock_status` (String) Policy Lock Status.

<a id="nestedblock--operations"></a>
### Nested Schema for `operations`

Required:

- `action_setting` (String) Determines whether the policy should take action now or during the specified backup window. Valid values are: `immediate` and `window`. `immediate` starts the backup process immediately while `window` starts the backup in the specified window.
- `type` (String) The type of operation to be performed. Depending on the type selected, `advanced_settings` may also be required. See the [API Documentation for List policies](https://help.clumio.com/reference/list-policy-definitions) for more information about the supported types.

Optional:

- `advanced_settings` (Block Set) Additional operation-specific policy settings. (see [below for nested schema](#nestedblock--operations--advanced_settings))
- `backup_aws_region` (String) The region in which this backup is stored. This might be used for cross-region backup. Possible values are AWS region string, for example: `us-east-1`, `us-west-2`, .... If no value is provided, it defaults to in-region (the asset's source region).
- `backup_window_tz` (Block Set) The start and end times for the customized backup window that reflects the user-defined timezone. (see [below for nested schema](#nestedblock--operations--backup_window_tz))
- `slas` (Block Set) The service level agreement (SLA) for the policy. A policy can include one or more SLAs. For example, a policy can retain daily backups for a month each, and monthly backups for a year each. (see [below for nested schema](#nestedblock--operations--slas))
- `timezone` (String) The time zone for the policy, in IANA format. For example: `America/Los_Angeles`, `America/New_York`, `Etc/UTC`, etc. For more information, see the Time Zone Database (https://www.iana.org/time-zones) on the IANA website.

<a id="nestedblock--operations--advanced_settings"></a>
### Nested Schema for `operations.advanced_settings`

Optional:

- `aws_ebs_volume_backup` (Block Set) Optional configuration settings for the aws_ebs_volume_backup operation. (see [below for nested schema](#nestedblock--operations--advanced_settings--aws_ebs_volume_backup))
- `aws_ec2_instance_backup` (Block Set) Optional configuration settings for the aws_ec2_instance_backup operation. (see [below for nested schema](#nestedblock--operations--advanced_settings--aws_ec2_instance_backup))
- `aws_rds_config_sync` (Block Set) Optional configuration settings for the aws_rds_config_sync operation. (see [below for nested schema](#nestedblock--operations--advanced_settings--aws_rds_config_sync))
- `aws_rds_resource_granular_backup` (Block Set) Optional configuration settings for the aws_rds_resource_granular_backup operation. (see [below for nested schema](#nestedblock--operations--advanced_settings--aws_rds_resource_granular_backup))
- `ec2_mssql_database_backup` (Block Set) Additional policy configuration settings for the mssql_database_backup operation. If this operation is not of type mssql_database_backup, then this field is omitted from the response. (see [below for nested schema](#nestedblock--operations--advanced_settings--ec2_mssql_database_backup))
- `ec2_mssql_log_backup` (Block Set) Additional policy configuration settings for the mssql_log_backup operation. If this operation is not of type mssql_log_backup, then this field is omitted from the response. (see [below for nested schema](#nestedblock--operations--advanced_settings--ec2_mssql_log_backup))
- `mssql_database_backup` (Block Set) Additional policy configuration settings for the mssql_database_backup operation. If this operation is not of type mssql_database_backup, then this field is omitted from the response. (see [below for nested schema](#nestedblock--operations--advanced_settings--mssql_database_backup))
- `mssql_log_backup` (Block Set) Additional policy configuration settings for the mssql_log_backup operation. If this operation is not of type mssql_log_backup, then this field is omitted from the response. (see [below for nested schema](#nestedblock--operations--advanced_settings--mssql_log_backup))
- `protection_group_backup` (Block Set) Additional policy configuration settings for the protection_group_backup operation. If this operation is not of type protection_group_backup, then this field is omitted from the response. (see [below for nested schema](#nestedblock--operations--advanced_settings--protection_group_backup))

<a id="nestedblock--operations--advanced_settings--aws_ebs_volume_backup"></a>
### Nested Schema for `operations.advanced_settings.aws_ebs_volume_backup`

Optional:

- `backup_tier` (String) Backup tier to store the backup in. Valid values are: `standard` and `lite`. If not provided, the default is `standard`.
	- `standard` = Clumio SecureVault Standard
	- `lite` = Clumio SecureVault Lite


<a id="nestedblock--operations--advanced_settings--aws_ec2_instance_backup"></a>
### Nested Schema for `operations.advanced_settings.aws_ec2_instance_backup`

Optional:

- `backup_tier` (String) Backup tier to store the backup in. Valid values are: `standard` and `lite`. If not provided, the default is `standard`.
	- `standard` = Clumio SecureVault Standard
	- `lite` = Clumio SecureVault Lite


<a id="nestedblock--operations--advanced_settings--aws_rds_config_sync"></a>
### Nested Schema for `operations.advanced_settings.aws_rds_config_sync`

Optional:

- `apply` (String) Additional policy configuration for syncing the configuration of Pitr in aws. Possible values include "immediate" and "maintenance_window". If "immediate" is provided, then configuration sync will be kicked in immediately. Otherwise configuration sync will be executed in a specific time user has provided.


<a id="nestedblock--operations--advanced_settings--aws_rds_resource_granular_backup"></a>
### Nested Schema for `operations.advanced_settings.aws_rds_resource_granular_backup`

Optional:

- `backup_tier` (String) Backup tier to store the RDS backup in. Valid values are: `frozen` and `standard`. For new policies, the only supported value is `frozen`. `standard` is supported for existing policies for a limited period of time.
	- `frozen` = Clumio SecureVault Archive
	- `standard` = Clumio SecureVault record


<a id="nestedblock--operations--advanced_settings--ec2_mssql_database_backup"></a>
### Nested Schema for `operations.advanced_settings.ec2_mssql_database_backup`

Optional:

- `alternative_replica` (String) The alternative replica for MSSQL database backups. This setting only applies to Availability Group databases. Possible values include "primary", "sync_secondary", and "stop". If "stop" is provided, then backups will not attempt to switch to a different replica when the preferred replica is unavailable. Otherwise, recurring backups will attempt to use either the primary replica or the secondary replica accordingly.
- `preferred_replica` (String) The primary preferred replica for MSSQL database backups. This setting only applies to Availability Group databases. Possible values include "primary" and "sync_secondary". Recurring backup will first attempt to use either the primary replica or the secondary replica accordingly.


<a id="nestedblock--operations--advanced_settings--ec2_mssql_log_backup"></a>
### Nested Schema for `operations.advanced_settings.ec2_mssql_log_backup`

Optional:

- `alternative_replica` (String) The alternative replica for MSSQL log backups. This setting only applies to Availability Group databases. Possible values include "primary", "sync_secondary", and "stop". If "stop" is provided, then backups will not attempt to switch to a different replica when the preferred replica is unavailable. Otherwise, recurring backups will attempt to use either the primary replica or the secondary replica accordingly.
- `preferred_replica` (String) The primary preferred replica for MSSQL log backups. This setting only applies to Availability Group databases. Possible values include "primary" and "sync_secondary". Recurring backup will first attempt to use either the primary replica or the secondary replica accordingly.


<a id="nestedblock--operations--advanced_settings--mssql_database_backup"></a>
### Nested Schema for `operations.advanced_settings.mssql_database_backup`

Optional:

- `alternative_replica` (String) The alternative replica for MSSQL database backups. This setting only applies to Availability Group databases. Possible values include "primary", "sync_secondary", and "stop". If "stop" is provided, then backups will not attempt to switch to a different replica when the preferred replica is unavailable. Otherwise, recurring backups will attempt to use either the primary replica or the secondary replica accordingly.
- `preferred_replica` (String) The primary preferred replica for MSSQL database backups. This setting only applies to Availability Group databases. Possible values include "primary" and "sync_secondary". Recurring backup will first attempt to use either the primary replica or the secondary replica accordingly.


<a id="nestedblock--operations--advanced_settings--mssql_log_backup"></a>
### Nested Schema for `operations.advanced_settings.mssql_log_backup`

Optional:

- `alternative_replica` (String) The alternative replica for MSSQL log backups. This setting only applies to Availability Group databases. Possible values include "primary", "sync_secondary", and "stop". If "stop" is provided, then backups will not attempt to switch to a different replica when the preferred replica is unavailable. Otherwise, recurring backups will attempt to use either the primary replica or the secondary replica accordingly.
- `preferred_replica` (String) The primary preferred replica for MSSQL log backups. This setting only applies to Availability Group databases. Possible values include "primary" and "sync_secondary". Recurring backup will first attempt to use either the primary replica or the secondary replica accordingly.


<a id="nestedblock--operations--advanced_settings--protection_group_backup"></a>
### Nested Schema for `operations.advanced_settings.protection_group_backup`

Optional:

- `backup_tier` (String) Backup tier to store the backup in. Valid values are: `cold` and `frozen`.
	- `cold` = Clumio SecureVault Standard
	- `frozen` = Clumio SecureVault Archive



<a id="nestedblock--operations--backup_window_tz"></a>
### Nested Schema for `operations.backup_window_tz`

Optional:

- `end_time` (String) The time when the backup window closes. Specify the end time in the format `hh:mm`, where `hh` represents the hour of the day and `mm` represents the minute of the day based on the 24 hour clock. Leave empty if you do not want to specify an end time. If the backup window closes while a backup is in progress, the entire backup process is aborted. The next backup will be performed when the  backup window re-opens.
- `start_time` (String) The time when the backup window opens. Specify the start time in the format `hh:mm`, where `hh` represents the hour of the day and `mm` represents the minute of the day based on the 24 hour clock.


<a id="nestedblock--operations--slas"></a>
### Nested Schema for `operations.slas`

Optional:

- `retention_duration` (Block Set) The retention time for this SLA. For example, to retain the backup for 1 month, set unit=months and value=1. (see [below for nested schema](#nestedblock--operations--slas--retention_duration))
- `rpo_frequency` (Block Set) The minimum frequency between backups for this SLA. Also known as the recovery point objective (RPO) interval. For example, to configure the minimum frequency between backups to be every 2 days, set unit=days and value=2. To configure the SLA for on-demand backups, set unit=on_demand and leave the value field empty. Also you can specify a day of week for Weekly SLA. For example, set offsets=[1] will trigger backup on every Monday. (see [below for nested schema](#nestedblock--operations--slas--rpo_frequency))

<a id="nestedblock--operations--slas--retention_duration"></a>
### Nested Schema for `operations.slas.retention_duration`

Required:

- `unit` (String) The measurement unit of the SLA parameter. Values include days, weeks, months and years.
- `value` (Number) The measurement value of the SLA parameter.


<a id="nestedblock--operations--slas--rpo_frequency"></a>
### Nested Schema for `operations.slas.rpo_frequency`

Required:

- `unit` (String) The measurement unit of the SLA parameter. Values include minutes, hours, days, weeks, months and years.
- `value` (Number) The measurement value of the SLA parameter.

Optional:

- `offsets` (List of Number) The offset values of the SLA parameter.

## Import

Import is supported using the following syntax:

```shell
# Replace POLICY_ID with the correct Clumio Policy ID.
terraform import clumio_policy.example POLICY_ID
```
